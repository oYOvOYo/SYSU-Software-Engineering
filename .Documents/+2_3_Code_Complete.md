---
layout: post
date: 2017/09/21
title: 代码补全
tags:
    - Code Complete
categories:
    - Reading
---

本文目的在记录《Code Complete 2rd》的一些阅读感想和章节内容总结。将会尽力做到把内容说到点子上。

<!--more-->


## 前言

我是不喜欢代码大全，这个名字的，原因在于，在我接触编程还不多的时候，听到这个名字对这本书的第一印象是，这会是一本有很多面对各种情况下提供参考解决方案的代码的参考手册或者宝典一类的东西。在看完序言以后，我再次确认了这是个人的理解错误，因而这里的标题是代码补全，这意味着，我觉得这本书是，教你怎么书写代码切实完成软件的。可能你会好奇，怎样来教一个人写出好的代码，或者你会有疑问，为什么任何人写出的代码差别很大——有些可能会被人们认为是好的，那么，怎样写出让人觉得好的代码呢？


## 打好基础

+ 软件构建包含很多步骤，比如需求分析，软件架构，编码调试，测试改进等等，但是其目的只是为了构建一个软件，看起来繁琐的步骤只是对特定阶段的一个名称。软件构建一般是一个开发项目的核心。
+ 类比方便人们理解事物，不断会有新的更好的类比出现。由于编程的不成熟性，很多概念都没有明确，很多方法也都是启发性质的（即告诉你“怎样可以获得”解决的方法而不是直接的解决方法）。在软件开发领域里也有很多“隐喻”，我们可以使用这些“隐喻”帮助更好的理解软件开发过程。一些最常见的类比比如“写代码”，“构建软件等等。”
+ 准备工作很有必要。准备工作的核心是降低风险。对于需求，我们应该做好需求变更的准备，同时需求也要尽可能的明确，架构的准备就是明确程序的各个功能块（如类的设计/输入输出等等）。
+ 决定好编程语言/技术环境（约定/工具等等事项）

## 创造高质量的代码
+ 设计要考虑正确，复杂度，易维护。设计可以使用分治/封装等思想，自上而下或者自下而上都好，模块应该尽可能松散耦合。
+ 抽象数据类型包含了数据和对于的操作，它在有若干理解/编写上的优越性，这个概念构成了类的基础（类还有继承/多态的特性），在设计类时，尽可能把不相关的数据提出去（形成单独的类），在对外接口上尽可能保持在一致的层次，可以把一些低层次的操作私有化，在封装的角度上，我们应该经可能限制对象的访问（否则就让封装失去了意义），少对类的使用者/内部实现做猜测。另，考虑到人脑处理兼带记忆离散项目的个数在7+/-2左右，当属性过多的时候请考虑划分为子类。
+ 创建子程序是为了通过封装降低程序的复杂度/引入中间抽象便于理解/避免代码重复/使用子类法用规范的代码避免冗杂出错/隐藏操作细节等．子程序最好只执行一个功能，子程序的命名要能描述子程序所做的所有事情，长度适中．子程序的长度最好不要太长（比如２００行）．输入参数最好按照输入－修改－输出来排列，或者保持其他一致的顺序．参数个数最好不要超过上面人的处理项目个数．
+ 防御式编程的主要思想是，子程序不应该因为传入参数的错误而崩溃，比如确定参数数值在一定范围内，使用断言在排除错误的时候可以帮上忙，我们可以使用宏或者其他机制实现自己的断言，使用断言的时候别把执行过程放入断言，在发现错误的时候，针对不同情况可以采取一些应对策略，比如跳过，使用一些合法值，记录日志等等．当然我们可以使用某些语言自带的异常处理机制．有些时候要注意好隔离，别让错误影响到其他部分，留在正式版软件中的防御代码要注意不要给用户带来麻烦．
+ 使用伪代码来描述过程可以提高设计和文档的质量，伪代码关注于描述意图，可以从抽象逐步加入细节，直到方便实现，在通过伪代码编程的时候，我们有如下一个完备的流程，首先确定是否要写，是不是重复工作，然后明确问题和目的，从命名/输入输出/效率/在标准库中寻找可以利用的部分等等方面入手，做好异常处理和测试工作．

## 变量

+ 对于变量，我们需要关注初始化：理想情况下，在第一次使用该变量的位置声明和初始化该变量．此外，尽可能的使用常量限定符，一些计数量要在每次使用前初始化．/关注作用域，尽可能的减少变量作用域，比如使缩短量生存周期．
+ 变量名也具有很大意义，尽可能表意明确，提供充足的信息，针对不同用途的变量有不同的命名约定，比如循环变量`i, j, k`等，一些布尔变量可以通过谓词使其本身具有是否的含义，全局变量也可以加上一些标记．
+ 对于一些基本的数据类型，整数我们需要考虑整数除法，表达式是否溢出等问题/浮点数应该考虑舍入误差，浮点数相等的比较误差/字符和字符串需要考虑下标偏差，指针的安全性等/使用布尔变量来说明和简化判断/使用枚举类型来增强可读性/数组越界，下标等错误
+ 基本数据类型
+ 不常见的数据类型

## 语句
+ 组织直线型代码
+ 使用条件语句
+ 控制循环
+ 不常见的控制结构
+ 表驱动法
+ 一般控制问题

## 代码改善
+ 软件质量概述
+ 协同构建
+ 开发者测试
+ 调试
+ 重构
+ 代码调整策略
+ 代码调整技术

## 系统考虑
+ 程序规模对构建的影响
+ 管理构建
+ 集成
+ 编程工具

## 软件工艺

+ 布局与风格
+ 自说明文档
+ 个人性格
+ 软件工艺的话题